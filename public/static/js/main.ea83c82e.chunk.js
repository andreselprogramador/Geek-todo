(this["webpackJsonpclient-todo"]=this["webpackJsonpclient-todo"]||[]).push([[0],{37:function(e,t,n){},42:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(18),o=n.n(a),i=(n(37),n(4)),s=n(14),u=n(31),d=n(5),l="[auth] Finish checking login state",j="[auth] Login",b="[auth] Logout",h="[todo] Todo loaded",p="[todo] Create Todo",O="[todo] Todo updated",f="[todo}] Todo deleted",m="[todo] Clear state todo",x={checking:!0},v=n(28),g={todos:[]},y=Object(s.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(d.a)(Object(d.a)(Object(d.a)({},e),t.payload),{},{checking:!1});case l:return Object(d.a)(Object(d.a)({},e),{},{checking:!1});case b:return{checking:!1};default:return e}},todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return{todos:[].concat(Object(v.a)(e.todos),[t.payload])};case h:return{todos:Object(v.a)(t.payload)};case O:return{todos:e.todos.map((function(e){return e.id===t.payload.id?t.payload:e}))};case f:return{todos:e.todos.filter((function(e){return e.id!==t.payload}))};case m:return{todos:[]};default:return e}}}),k="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,w=Object(s.e)(y,k(Object(s.a)(u.a))),A=(n(42),n(11)),S=n(3),N=n(22),E=n(1),T=function(e){var t=e.isAuthenticated,n=e.component,c=Object(N.a)(e,["isAuthenticated","component"]);return Object(E.jsx)(S.b,Object(d.a)(Object(d.a)({},c),{},{component:function(e){return t?Object(E.jsx)(S.a,{to:"/todos"}):Object(E.jsx)(n,Object(d.a)({},e))}}))},C=function(e){var t=e.isAuthenticated,n=e.component,c=Object(N.a)(e,["isAuthenticated","component"]);return Object(E.jsx)(S.b,Object(d.a)(Object(d.a)({},c),{},{component:function(e){return t?Object(E.jsx)(n,Object(d.a)({},e)):Object(E.jsx)(S.a,{to:"/login"})}}))},I=(n(45),function(){return Object(E.jsxs)("div",{className:"container-landing",children:[Object(E.jsx)("header",{className:"container-landing-header",children:Object(E.jsx)("h1",{children:"Geek Todo"})}),Object(E.jsx)("div",{className:"container-landing-info",children:Object(E.jsx)("p",{children:"Un lugar para mantener todo en orden"})}),Object(E.jsxs)("div",{className:"container-landing-links",children:[Object(E.jsx)(A.b,{to:"/login",children:"Iniciar sesi\xf3n"}),Object(E.jsx)(A.b,{to:"/register",children:"Registrarse"})]})]})}),G=n(13),P=n(6),D=n.n(P),B=n(12),U="https://geek-todo.herokuapp.com/api",R=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(U,"/").concat(e);return"GET"===n?fetch(c):fetch(c,{method:n,headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",c="".concat(U,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(c,{method:n,headers:{"x-token":r}}):fetch(c,{method:n,headers:{"Content-Type":"application/json","x-token":r},body:JSON.stringify(t)})},J=function(){return{type:l}},M=function(e){return{type:j,payload:e}},Q=function(){return{type:b}},V=n(20),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(c.useState)(e),n=Object(G.a)(t,2),r=n[0],a=n[1],o=function(){a(e)},i=function(e){var t=e.target;a(Object(d.a)(Object(d.a)({},r),{},Object(V.a)({},t.name,t.value)))};return[r,i,o]},F=(n(47),function(){var e=q({lEmail:"",lPassword:""}),t=Object(G.a)(e,2),n=t[0],c=t[1],r=n.lEmail,a=n.lPassword,o=Object(i.b)();return Object(E.jsxs)("div",{className:"login",children:[Object(E.jsx)("header",{className:"header-login",children:Object(E.jsx)("h1",{children:"Iniciar Sesi\xf3n"})}),Object(E.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),o((t=r,n=a,function(){var e=Object(B.a)(D.a.mark((function e(c){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("auth/login",{email:t,password:n},"POST");case 2:return r=e.sent,e.next=5,r.json();case 5:(a=e.sent).ok&&(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(M({uid:a.uid,name:a.name})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(E.jsx)("input",{type:"email",name:"lEmail",placeholder:"Email",value:r,onChange:c,required:!0}),Object(E.jsx)("input",{type:"password",name:"lPassword",placeholder:"Password",value:a,onChange:c,required:!0}),Object(E.jsx)("button",{type:"submit",children:"Iniciar Sesi\xf3n"})]}),Object(E.jsx)(A.b,{to:"/register",children:"\xbfNo tienes una cuenta?"})]})}),H=(n(48),function(){var e=q({rName:"",rEmail:"",rPassword:""}),t=Object(G.a)(e,2),n=t[0],c=t[1],r=Object(i.b)(),a=n.rName,o=n.rEmail,s=n.rPassword;return Object(E.jsxs)("div",{className:"register",children:[Object(E.jsx)("header",{className:"header-register",children:Object(E.jsx)("h1",{children:"Registrarse"})}),Object(E.jsxs)("form",{onSubmit:function(e){var t,n,c;e.preventDefault(),r((t=o,n=s,c=a,function(){var e=Object(B.a)(D.a.mark((function e(r){var a,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R("auth/register",{email:t,password:n,name:c},"POST");case 2:return a=e.sent,e.next=5,a.json();case 5:(o=e.sent).ok&&(localStorage.setItem("token",o.token),localStorage.setItem("token-init-date",(new Date).getTime()),r(M({uid:o.uid,name:o.name})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(E.jsx)("input",{type:"text",name:"rName",placeholder:"Nombre",value:a,onChange:c,required:!0}),Object(E.jsx)("input",{type:"email",name:"rEmail",placeholder:"Email",value:o,onChange:c,required:!0}),Object(E.jsx)("input",{type:"password",name:"rPassword",placeholder:"Password",value:s,onChange:c,required:!0}),Object(E.jsx)("button",{type:"submit",children:"Registrate"})]}),Object(E.jsx)(A.b,{to:"/login",children:"\xbfYa tienes una cuenta?"})]})}),K=function(e){return{type:p,payload:e}},L=function(e){return{type:h,payload:e}},W=function(e){return{type:O,payload:e}},X=function(e){return{type:f,payload:e}},z=n(32),Y=n.n(z),Z=(n(51),function(){var e=(new Date).getHours(),t=Y()(e,"es"),n=Object(i.b)(),c=Object(i.c)((function(e){return e.auth})).name;return Object(E.jsxs)("header",{children:[Object(E.jsx)("div",{className:"todo-saludo",children:Object(E.jsxs)("h1",{children:["tardes"===t||"noches"===t?"Buenas":"Buenos"," ",t,", ",c]})}),Object(E.jsx)("div",{className:"todo-salir",children:Object(E.jsx)("button",{onClick:function(){n((function(e){localStorage.clear(),e(Q())})),n({type:m})},children:"Salir"})})]})}),$=(n(52),function(){var e=Object(c.useState)(""),t=Object(G.a)(e,2),n=t[0],r=t[1],a=Object(i.b)(),o=Object(i.c)((function(e){return e.auth})).uid;return Object(E.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0===n.length)return!1;var t;r(""),a((t={title:n,uid:o},function(){var e=Object(B.a)(D.a.mark((function e(n){var c,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={task:t.title},e.prev=1,e.next=4,_("todos/".concat(t.uid),c,"POST");case 4:return r=e.sent,e.next=7,r.json();case 7:(a=e.sent).ok&&n(K(a.todo)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(E.jsx)("input",{type:"text",onChange:function(e){r(e.target.value)},placeholder:"Escribe tu todo y mantente en orden",value:n}),Object(E.jsx)("button",{children:"Crear todo"})]})}),ee=(n(53),function(e){var t=e.task,n=e.todoId,c=e.user,r=e.completed,a=Object(i.b)(),o=function(e){a(function(e,t,n){return function(){var c=Object(B.a)(D.a.mark((function c(r){var a,o,i,s;return D.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,a={completed:!n},c.next=4,_("todos/".concat(e,"/").concat(t),a,"PUT");case 4:return o=c.sent,c.next=7,o.json();case 7:i=c.sent,s=i.todo,console.log(s),i.ok&&r(W(s)),c.next=16;break;case 13:c.prev=13,c.t0=c.catch(0),console.error(c.t0);case 16:case"end":return c.stop()}}),c,null,[[0,13]])})));return function(e){return c.apply(this,arguments)}}()}(c,e,r))},s=function(e){a(function(e,t){return function(){var n=Object(B.a)(D.a.mark((function n(c){var r;return D.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,_("todos/".concat(e,"/").concat(t),{},"DELETE");case 3:return r=n.sent,n.next=6,r.json();case 6:n.sent.ok&&c(X(t)),console.log(t),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(c,e))};return Object(E.jsxs)("li",{className:"animate__animated animate__fadeIn",children:[Object(E.jsx)("p",{onClick:function(){return o(n)},className:r?"completed":"",children:t}),Object(E.jsx)("i",{children:Object(E.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAABQUlEQVRIieXVzypFURQG8N+VP2MM7jWREslryIQZmVDMvAjlBZi4ryAPQcmUuhkghboiUwO6MTj7aOeee53tz0C+OnXW2t9a31prr87hv2AYddyhiV0M/VTyfhzjKSSuh/cj9P2EwDxesRD5FoNvLiXRGloh8DtPC6t50t5I4ABbodKqbBQpWJfd0T4OuxF38JCYHB6x/dHZU0BsyramPyH5AAZDbCmBimxMOVbQiOwGliO7GmLuygjkpJHIN4HpyJ7GZGTn3NIdfBT4DF8SqP2WwL1sl1M6qIWYtu0rEsiJqSPKC/tUgOyiU0fUtkHdBJrSR9Q2/xSBK1xE9mXwxQKFHXTCJp67FBCjJ3A3Oh0W4Vr2rR8tITAWuDdFh5UOQaM4wzn28NKB14cljGMKtyUKescsTnX/R7RwgpmUxH8Lb39GWIqOizMVAAAAAElFTkSuQmCC",alt:"trash icon",onClick:function(){return s(n)}})})]})}),te=(n(54),function(){var e=Object(i.c)((function(e){return e.auth})).uid,t=Object(i.c)((function(e){return e.todos})).todos,n=Object(i.b)();return Object(c.useEffect)((function(){var t;n((t=e,function(){var e=Object(B.a)(D.a.mark((function e(n){var c,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_("todos/".concat(t));case 3:return c=e.sent,e.next=6,c.json();case 6:r=e.sent,a=r.todos,n(L(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()))}),[n]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Z,{}),Object(E.jsx)($,{}),Object(E.jsx)("ul",{children:t.map((function(e){return Object(E.jsx)(ee,{task:e.task,todoId:e.id,user:e.user,completed:e.completed},e.id)}))})]})}),ne=(n(55),function(){return Object(E.jsx)("div",{className:"loader",children:Object(E.jsxs)("div",{id:"circleG",children:[Object(E.jsx)("div",{id:"circleG_1",className:"circleG"}),Object(E.jsx)("div",{id:"circleG_2",className:"circleG"}),Object(E.jsx)("div",{id:"circleG_3",className:"circleG"})]})})}),ce=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})),n=t.checking,r=t.uid;return Object(c.useEffect)((function(){e(function(){var e=Object(B.a)(D.a.mark((function e(t){var n,c;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("auth/renew");case 2:return n=e.sent,e.next=5,n.json();case 5:(c=e.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(M({uid:c.uid,name:c.name}))):t(J());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object(E.jsx)(ne,{}):Object(E.jsx)(A.a,{children:Object(E.jsx)("div",{children:Object(E.jsxs)(S.d,{children:[Object(E.jsx)(T,{exact:!0,path:"/",component:I,isAuthenticated:!!r}),Object(E.jsx)(T,{exact:!0,path:"/login",component:F,isAuthenticated:!!r}),Object(E.jsx)(T,{exact:!0,path:"/register",component:H,isAuthenticated:!!r}),Object(E.jsx)(C,{exact:!0,path:"/todos",component:te,isAuthenticated:!!r}),Object(E.jsx)(S.a,{to:"/"})]})})})};var re=function(){return Object(E.jsx)(i.a,{store:w,children:Object(E.jsx)("div",{className:"App",children:Object(E.jsx)(ce,{})})})};o.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(re,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.ea83c82e.chunk.js.map